<!DOCTYPE html>
<html>
  <head>
    <title>Color Puzzle</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- First Room -->
      <a-box position="-3 0 -5" width="6" height="4" depth="10" color="#8B4513"></a-box>
      <a-box position="-4.5 2 -7" width="2" height="2" depth="2" color="green" id="box1"></a-box>
      <a-text value="Change the box to the color of the door to proceed!" position="-3 2.5 -6" color="white"></a-text>
      
      <!-- Second Room -->
      <a-box position="3 0 -5" width="6" height="4" depth="10" color="#8B4513"></a-box>
      <a-box position="4.5 2 -7" width="2" height="2" depth="2" color="red" id="box2"></a-box>
      <a-box position="0 2 -7" width="2" height="2" depth="2" color="blue" id="box3"></a-box>
      <a-text value="Arrange the boxes in the order of the rainbow to proceed!" position="3 2.5 -6" color="white"></a-text>
      
      <!-- Camera -->
      <a-entity camera position="0 1.6 0" look-controls></a-entity>
    </a-scene>
    
    <script>
      var box1Color = 'green';
      var box2Color = 'red';
      var box3Color = 'blue';
      
      var doorColors = ['red', 'orange', 'yellow', 'green', 'blue', 'purple'];
      var doorIndex = 0;
      
      var box1 = document.querySelector('#box1');
      var box2 = document.querySelector('#box2');
      var box3 = document.querySelector('#box3');
      
      // Add event listener to box1 to change its color
      box1.addEventListener('click', function() {
        if (box1.getAttribute('color') === doorColors[doorIndex]) {
          var message = document.querySelector('a-text');
          message.setAttribute('value', 'You solved the puzzle! Proceed to the next room.');
          doorIndex++;
        } else {
          box1.setAttribute('color', box1Color);
        }
      });
      
      // Add event listener to box2 and box3 to arrange them in order
      box2.addEventListener('click', function() {
        if (box2.getAttribute('position').z < box3.getAttribute('position').z) {
          box2.setAttribute('position', '0 2 -7.5');
          box3.setAttribute('position', '0 2 -6.5');
        } else {
          box2.setAttribute('position', '4.5 2 -7');
          box3.setAttribute('position', '0 2 -7');
        }
        
        if (box1.getAttribute('color') === doorColors[doorIndex]) {
          var message = document.querySelector('a-text');
          message.setAttribute('value', 'You solved the puzzle! Proceed to the next room.');
          doorIndex++;
        }
      });
      
      // Add event listener to box3 to arrange it with box2
      box3.addEventListener('click', function() {
        if (box3.getAttribute('position')
        if (box1.getAttribute('color') === doorColors[doorIndex]) {
      var message = document.querySelector('a-text');
      message.setAttribute('value', 'You solved the puzzle! Proceed to the next room.');
      doorIndex++;
    }
  });
  
  // Add event listener to camera to reset the door color index
  var camera = document.querySelector('a-entity[camera]');
  camera.addEventListener('componentchanged', function(evt) {
    if (evt.detail.name === 'position') {
      doorIndex = 0;
    }
  });
</script>

